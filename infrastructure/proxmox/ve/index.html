
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../backup/">
      
      
        <link rel="next" href="../../../miscellaneous/nuc-app-config/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Proxmox Virtual Environment (VE) - dbrennand | home-ops</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#proxmox-virtual-environment-ve" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="dbrennand | home-ops" class="md-header__button md-logo" aria-label="dbrennand | home-ops" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dbrennand | home-ops
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Proxmox Virtual Environment (VE)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/dbrennand/home-ops" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    dbrennand/home-ops
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="dbrennand | home-ops" class="md-nav__button md-logo" aria-label="dbrennand | home-ops" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    dbrennand | home-ops
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dbrennand/home-ops" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    dbrennand/home-ops
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🏠 🛠 Home Operations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../docker-compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Compose
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ansible
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Ansible
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ansible/awx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ansible/execution-environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ansible/minecraft/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Minecraft
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backblaze/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backblaze Object Storage (S3)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../beszel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Beszel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hetzner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hetzner Cloud
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Media Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../opentofu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenTofu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../secrets-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secrets Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tailscale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tailscale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" checked>
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Proxmox
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Proxmox
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxmox Backup Server (PBS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Proxmox Virtual Environment (VE)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Proxmox Virtual Environment (VE)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#proxmox-ve-specs" class="md-nav__link">
    <span class="md-ellipsis">
      Proxmox VE Specs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proxmox VE Specs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node-1" class="md-nav__link">
    <span class="md-ellipsis">
      Node 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Post Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-web-interface-with-lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS - Web Interface with Let's Encrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-backup-schedules" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Backup Schedules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#archived-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Archived Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Archived Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-proxmox-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Proxmox Cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-external-vote-server" class="md-nav__link">
    <span class="md-ellipsis">
      Create External Vote Server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../miscellaneous/nuc-app-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NUC - Application Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../miscellaneous/python-uv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#proxmox-ve-specs" class="md-nav__link">
    <span class="md-ellipsis">
      Proxmox VE Specs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proxmox VE Specs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node-1" class="md-nav__link">
    <span class="md-ellipsis">
      Node 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Post Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-web-interface-with-lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS - Web Interface with Let's Encrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-backup-schedules" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Backup Schedules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#archived-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Archived Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Archived Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-proxmox-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Proxmox Cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-external-vote-server" class="md-nav__link">
    <span class="md-ellipsis">
      Create External Vote Server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="proxmox-virtual-environment-ve"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.928 1.825c-1.09.553-1.09.64-.07 1.78 5.655 6.295 7.004 7.782 7.107 7.782.139.017 7.971-8.542 8.058-8.801.034-.07-.208-.312-.519-.536-.415-.312-.864-.433-1.712-.467-1.59-.104-2.144.242-4.115 2.455-.899 1.003-1.66 1.833-1.66 1.833-.017 0-.76-.813-1.642-1.798S8.473 2.1 8.127 1.91c-.796-.45-2.421-.484-3.2-.086zM1.297 4.367C.45 4.695 0 5.007 0 5.248c0 .121 1.331 1.678 2.94 3.459 1.625 1.78 2.939 3.268 2.939 3.302s-1.331 1.522-2.94 3.303C1.314 17.11.017 18.683.035 18.822c.086.467 1.504 1.055 2.541 1.055 1.678-.018 2.058-.312 5.603-4.202 1.78-1.954 3.233-3.614 3.233-3.666 0-.069-1.435-1.694-3.199-3.63-2.3-2.508-3.423-3.632-3.96-3.874-.812-.398-2.126-.467-2.956-.138m18.467.12c-.502.26-1.764 1.505-3.943 3.891-1.763 1.937-3.199 3.562-3.199 3.631 0 .07 1.453 1.712 3.234 3.666 3.544 3.89 3.925 4.184 5.602 4.202 1.038 0 2.455-.588 2.542-1.055.017-.156-1.28-1.712-2.905-3.493-1.608-1.78-2.94-3.285-2.94-3.32s1.332-1.539 2.94-3.32C22.72 6.91 24.017 5.352 24 5.214c-.087-.45-1.366-.968-2.473-1.038-.795-.034-1.21.035-1.763.312zM7.954 16.973c-2.144 2.369-3.908 4.374-3.943 4.46-.034.07.208.312.52.537.414.311.864.432 1.711.467 1.574.103 2.161-.26 4.15-2.508.864-.968 1.608-1.78 1.625-1.78s.761.812 1.643 1.798c2.023 2.248 2.559 2.576 4.132 2.49.848-.035 1.297-.156 1.712-.467.311-.225.553-.467.519-.536-.087-.26-7.92-8.819-8.058-8.801-.069 0-1.867 1.954-4.011 4.34"/></svg></span> Proxmox Virtual Environment (VE)</h1>
<div class="admonition quote">
<p class="admonition-title">What is Proxmox VE?</p>
<p><a href="https://proxmox.com/en/proxmox-virtual-environment/overview">Proxmox Virtual Environment</a> is a complete open-source platform for enterprise virtualization. With the built-in web interface you can easily manage VMs and containers, software-defined storage and networking, high-availability clustering, and multiple out-of-the-box tools using a single solution.</p>
</div>
<h2 id="proxmox-ve-specs">Proxmox VE Specs</h2>
<h3 id="node-1">Node 1</h3>
<p><a href="https://store.minisforum.uk/collections/intel/products/un1265">Minisforum Venus Series UN1265</a></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>Intel® Core™ i7-12650H Processor, 10 Cores/16 Threads (24M Cache, up to 4.70 GHz)</td>
</tr>
<tr>
<td>Memory</td>
<td>64GB DDR4 3200MHz SODIMM (2x32GB)</td>
</tr>
<tr>
<td>Storage (Internal)</td>
<td>Samsung NVMe 970 EVO Plus 1TB</td>
</tr>
<tr>
<td>Storage (External)</td>
<td>Crucial SSD MX500 2TB</td>
</tr>
<tr>
<td>Storage (External)</td>
<td>Samsung SSD 870 QVO 1TB</td>
</tr>
<tr>
<td>Storage (External)</td>
<td>64GB USB</td>
</tr>
</tbody>
</table>
<h2 id="deployment">Deployment</h2>
<ol>
<li>
<p>Power on the node and enter the BIOS.</p>
</li>
<li>
<p>Go to <code>Advanced</code> &gt; <code>System Devices Configuration</code> and set <code>VT-d</code> and <code>SR-IOV</code> to <code>Enabled</code>.</p>
</li>
<li>
<p>Download the <a href="https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso">Proxmox VE ISO</a> and flash it to a USB drive using a tool such as <a href="https://etcher.balena.io/">Etcher</a>.</p>
</li>
<li>
<p>Insert the USB drive into the node and boot to the USB by pressing the <code>DELETE</code> key during boot.</p>
</li>
<li>
<p>Follow the on-screen instructions to install Proxmox VE, when prompted enter the following details:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Install Disk</td>
<td><code>/dev/nvme0n1</code></td>
</tr>
<tr>
<td>FQDN</td>
<td><code>proxmox01.net.dbren.uk</code></td>
</tr>
<tr>
<td>Email</td>
<td>Enter email</td>
</tr>
<tr>
<td>Password</td>
<td>Enter password</td>
</tr>
<tr>
<td>Default Gateway</td>
<td><code>192.168.0.1</code></td>
</tr>
<tr>
<td>IP Address</td>
<td><code>192.168.0.4/24</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Once installation has completed, login to the web interface listening on port <code>8006</code> using the FQDN and credentials entered during installation.</p>
</li>
</ol>
<h2 id="post-installation">Post Installation</h2>
<p>Below are the post installation steps for configuring the Proxmox VE node.</p>
<p>Copy SSH public key to the Proxmox VE node's <code>authorized_keys</code> file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ssh-copy-id<span class="w"> </span>root@proxmox01.net.dbren.uk
</span></code></pre></div>
<h3 id="storage"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m6 2a6 6 0 0 0-6 6c0 3.31 2.69 6 6.1 6l-.88-2.23a1.01 1.01 0 0 1 .37-1.37l.86-.5a1.01 1.01 0 0 1 1.37.37l1.92 2.42A5.98 5.98 0 0 0 18 10a6 6 0 0 0-6-6m0 5a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m-5 9a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1m5.09-4.73 2.49 6.31 2.59-1.5-4.22-5.31z"/></svg></span> Storage</h3>
<ol>
<li>
<p>Extend the Proxmox <code>data</code> logical volume on each node to use the remaining space in the volume group:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>lvextend<span class="w"> </span>-l<span class="w"> </span>+100%FREE<span class="w"> </span>/dev/pve/data
</span></code></pre></div>
</li>
<li>
<p>Use the <a href="https://github.com/dbrennand/home-ops/blob/main/ansible/playbooks/playbook-proxmox-storage.yml"><code>playbook-proxmox-storage.yml</code></a> to configure the Proxmox storage on Node 1.</p>
</li>
</ol>
<h3 id="https-web-interface-with-lets-encrypt"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.991 0a.883.883 0 0 0-.871.817v3.02a.883.883 0 0 0 .88.884.883.883 0 0 0 .88-.88V.816A.883.883 0 0 0 11.991 0m7.705 3.109a.88.88 0 0 0-.521.174L16.8 5.231a.88.88 0 0 0 .559 1.563.88.88 0 0 0 .56-.2l2.37-1.951a.88.88 0 0 0-.594-1.534M4.32 3.122a.883.883 0 0 0-.611 1.52l2.37 1.951a.88.88 0 0 0 .56.2v-.002a.88.88 0 0 0 .56-1.56L4.828 3.283a.9.9 0 0 0-.508-.16zm7.66 3.228a5.046 5.046 0 0 0-5.026 5.045v1.488H5.787a.967.967 0 0 0-.965.964v9.189a.967.967 0 0 0 .965.964h12.426a.967.967 0 0 0 .964-.964v-9.19a.967.967 0 0 0-.964-.963h-1.168v-1.488A5.046 5.046 0 0 0 11.98 6.35m.012 2.893a2.15 2.15 0 0 1 2.16 2.152v1.488H9.847v-1.488a2.15 2.15 0 0 1 2.145-2.152zm7.382.503a.883.883 0 1 0 .07 1.763h3.027a.883.883 0 0 0 0-1.76h-3.027zM1.529 9.75a.883.883 0 0 0 0 1.76h2.999a.883.883 0 0 0 0-1.76zm10.46 6.774a1.28 1.28 0 0 1 .64 2.393v1.245a.63.63 0 0 1-1.259 0v-1.245a1.28 1.28 0 0 1 .619-2.393"/></svg></span> HTTPS - Web Interface with Let's Encrypt</h3>
<div class="admonition info">
<p class="admonition-title">Cloudflare API Token &amp; Zone ID</p>
<p>See the following <a href="https://github.com/dbrennand/ansible-role-caddy-docker#example---cloudflare-dns-01-challenge">instructions</a> for generating a Cloudflare API Token.</p>
<p>Furthermore, you will need to obtain your domain's zone ID. This can be found in the Cloudflare dashboard page for the domain, on the right side under <em>API</em> &gt; <em>Zone ID</em>.</p>
</div>
<ol>
<li>
<p>Login to the Proxmox GUI on Node 1 and go to <code>Datacenter</code> &gt; <code>ACME</code> &gt; <em>Accounts</em> and click <strong>Add</strong>:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Account Name</td>
<td><code>default</code></td>
</tr>
<tr>
<td>Email</td>
<td><code>&lt;Email&gt;</code></td>
</tr>
<tr>
<td>ACME Directory</td>
<td><code>Let's Encrypt V2</code></td>
</tr>
<tr>
<td>Accept TOS</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Register</strong>.</p>
</li>
<li>
<p>Under <em>Challenge Plugins</em>, click <strong>Add</strong> and enter the following details:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Plugin ID</td>
<td><code>cloudflare</code></td>
</tr>
<tr>
<td>DNS API</td>
<td><code>Cloudflare Managed API</code></td>
</tr>
<tr>
<td>CF_Token</td>
<td><code>&lt;Cloudflare API Token&gt;</code></td>
</tr>
<tr>
<td>CF_Zone_ID</td>
<td><code>&lt;Cloudflare Zone ID&gt;</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Add</strong>.</p>
</li>
<li>
<p>Navigate to <code>Datacenter</code> &gt; <code>proxmox01</code> &gt; <code>Certificates</code> and under <em>ACME</em> click <strong>Add</strong>:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Challenge Type</td>
<td><code>DNS</code></td>
</tr>
<tr>
<td>Plugin</td>
<td><code>cloudflare</code></td>
</tr>
<tr>
<td>Domain</td>
<td><code>proxmox01.net.dbren.uk</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
<li>
<p>Under <em>ACME</em> &gt; for <code>Using Account</code> click <strong>Edit</strong> and select the <code>default</code> account and click <strong>Apply</strong>.</p>
</li>
<li>
<p>Click <strong>Order Certificates Now</strong>.</p>
</li>
</ol>
<p>Once completed, the <code>pveproxy.service</code> will reload the web interface and show the new certificate.</p>
<h3 id="scripts"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L146.7 256zM224 384h256c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg></span> Scripts</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Proceed with caution, before running any of the scripts below, make sure to review the code to ensure it is safe to run.</p>
</div>
<ol>
<li>
<p>Run the <a href="https://github.com/tteck/Proxmox">Proxmox VE post install</a> script on both PVE nodes:</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>This script provides options for managing Proxmox VE repositories, including disabling the Enterprise Repo, adding or correcting PVE sources, enabling the No-Subscription Repo, adding the test Repo, disabling the subscription nag, updating Proxmox VE, and rebooting the system.</p>
</div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>wget<span class="w"> </span>-qLO<span class="w"> </span>-<span class="w"> </span>https://github.com/tteck/Proxmox/raw/main/misc/post-pve-install.sh<span class="k">)</span><span class="s2">&quot;</span>
</span></code></pre></div>
</li>
<li>
<p>Run the <a href="https://github.com/Weilbyte/PVEDiscordDark">Proxmox Dark Theme</a> script:</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>A dark theme for the Proxmox VE Web UI is a custom theme created by <a href="https://github.com/Weilbyte/PVEDiscordDark">Weilbyte</a> that changes the look and feel of the Proxmox web-based interface to a dark color scheme. This theme can improve the visual experience and make the interface easier on the eyes, especially when used in low-light environments.</p>
</div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>bash<span class="w"> </span>&lt;<span class="o">(</span>curl<span class="w"> </span>-s<span class="w"> </span>https://raw.githubusercontent.com/Weilbyte/PVEDiscordDark/master/PVEDiscordDark.sh<span class="w"> </span><span class="o">)</span><span class="w"> </span>install
</span></code></pre></div>
</li>
</ol>
<h3 id="configure-backup-schedules"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m.5 11H7v-1.5h4V7h1.5z"/></svg></span> Configure Backup Schedules</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following steps are to be completed once the <a href="https://homeops.danielbrennand.com/infrastructure/proxmox/backup/">Proxmox Backup Server</a> has been deployed and configured.</p>
</div>
<ol>
<li>
<p>Navigate to the Proxmox GUI on Node 1 and go to <code>Datacenter</code> &gt; <code>Storage</code> &gt; <code>Add</code> and choose <code>Proxmox Backup Server</code>.</p>
</li>
<li>
<p>Enter the following details and click <strong>Add</strong>:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following Proxmox Backup Server datastore was called <code>backup01</code>.</p>
</div>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td><code>backup01-Remote</code></td>
</tr>
<tr>
<td>Server</td>
<td><code>backup01.net.dbren.uk</code></td>
</tr>
<tr>
<td>Datastore</td>
<td><code>Remote</code></td>
</tr>
<tr>
<td>Username</td>
<td><code>root@pam</code></td>
</tr>
<tr>
<td>Password</td>
<td>Enter password</td>
</tr>
<tr>
<td>Fingerprint</td>
<td>Copy from Proxmox Backup Server Dashboard &gt; <code>Show Fingerprint</code></td>
</tr>
<tr>
<td>Encryption</td>
<td>Upload an existing client encryption key</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Repeat the steps above for <code>Local</code> (formerly <code>backup02</code>):</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td><code>backup01-Local</code></td>
</tr>
<tr>
<td>Server</td>
<td><code>backup01.net.dbren.uk</code></td>
</tr>
<tr>
<td>Datastore</td>
<td><code>Local</code></td>
</tr>
<tr>
<td>Username</td>
<td><code>root@pam</code></td>
</tr>
<tr>
<td>Password</td>
<td>Enter password</td>
</tr>
<tr>
<td>Fingerprint</td>
<td>Copy from Proxmox Backup Server Dashboard &gt; <code>Show Fingerprint</code></td>
</tr>
<tr>
<td>Encryption</td>
<td>Upload an existing client encryption key</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Navigate to <code>Datacenter</code> &gt; <code>Backup</code> &gt; <code>Add</code> and enter the following details:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Storage</td>
<td><code>backup01-Local</code></td>
</tr>
<tr>
<td>Schedule</td>
<td><code>01:00</code></td>
</tr>
<tr>
<td>Selection Mode</td>
<td><code>Exclude selected VMs</code></td>
</tr>
<tr>
<td>Mode</td>
<td><code>Snapshot</code></td>
</tr>
<tr>
<td>Retention - Keep Daily</td>
<td>10</td>
</tr>
<tr>
<td>Retention - Keep Weekly</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Choose <code>backup01</code> to exclude from backups and click <strong>OK</strong>.</p>
</li>
</ol>
<h2 id="archived-steps">Archived Steps</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The documentation under this heading are old steps used when I had a 2 node Proxmox VE cluster. I've kept them here in case I ever need them again in the future.</p>
</div>
<h3 id="create-the-proxmox-cluster">Create the Proxmox Cluster</h3>
<ol>
<li>
<p>Navigate to the Proxmox GUI on Node 1 (Primary) and go to <code>Datacenter</code> &gt; <code>Cluster</code> &gt; <code>Create Cluster</code>:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>home-ops</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Once the cluster has been created, click <strong>Join Information</strong> and copy the alphanumeric string to the clipboard.</p>
</li>
<li>
<p>Navigate to the Proxmox GUI on Node 2 (Secondary) and go to <code>Datacenter</code> &gt; <code>Cluster</code> &gt; <code>Join Cluster</code> and paste the alphanumeric string into the text box.</p>
</li>
<li>
<p>Enter Node 1's root password for the <em>peer's root password</em> field and click <strong>Join 'home-ops'</strong>.</p>
</li>
<li>
<p>Wait for the cluster to establish. You will know when this has completed as on each node's GUIs you should now see the other node listed under <code>Datacenter</code>.</p>
</li>
</ol>
<h3 id="create-external-vote-server"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 13h-.68l-2 2h1.91L19 17H5l1.78-2h2.05l-2-2H6l-3 3v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4zm-1-5.05-4.95 4.95L8.5 9.36l4.96-4.95zm-4.24-5.66L6.39 8.66a.996.996 0 0 0 0 1.41L11.34 15c.39.41 1.02.41 1.41 0l6.36-6.34a.996.996 0 0 0 0-1.41L14.16 2.3a.975.975 0 0 0-1.4-.01"/></svg></span> Create External Vote Server</h3>
<p>Due to the Proxmox cluster only consisting of two nodes, there is no way to establish quorum.</p>
<div class="admonition quote">
<p class="admonition-title">What's Quroum?</p>
<p>A <a href="https://pve.proxmox.com/wiki/Cluster_Manager#_quorum">quorum</a> is the minimum number of votes that a distributed transaction has to obtain in order to be allowed to perform an operation in a distributed system.</p>
</div>
<p>Without quorum, if one node goes down, the other node will not be able to determine if it is the only node left in the cluster or if the other node is still running. This is often referred to as a <em>split-brain</em> scenario. Luckily, Proxmox's Corosync supports an external vote server (known as a Corosync Quorum Device (QDevice)) to act as a tie-breaker. This lightweight daemon can be run on a device such as a Raspberry Pi.</p>
<ol>
<li>
<p>On each Proxmox VE cluster node, install <code>corosync-qdevice</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>corosync-qdevice
</span></code></pre></div>
</li>
<li>
<p>On the Raspberry Pi, install <code>corosync-qnetd</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>corosync-qnetd
</span></code></pre></div>
</li>
<li>
<p>On Proxmox Node 1 (Primary), execute the following command to add the QDevice to the cluster:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>pvecm<span class="w"> </span>qdevice<span class="w"> </span>setup<span class="w"> </span><span class="m">192</span>.168.0.3
</span></code></pre></div>
</li>
<li>
<p>Once added, verify the QDevice is online:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>pvecm<span class="w"> </span>status
</span></code></pre></div>
</li>
</ol>
<p>If the QDevice is successfully added, you should see the following:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Membership information
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>----------------------
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    Nodeid      Votes    Qdevice Name
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>0x00000001          1    A,V,NMW 192.168.0.4 (local)
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>0x00000002          1    A,V,NMW 192.168.0.3
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>0x00000000          1            Qdevice
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.tracking", "navigation.expand", "navigation.top"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>