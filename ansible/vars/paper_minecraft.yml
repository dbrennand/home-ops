---
# vars file for minecraft-playbook.yml - server_type paper
# Container image tag
minecraft_image_tag: latest
# https://docs.ansible.com/ansible/latest/collections/community/docker/docker_container_module.html#parameter-memory
# Container memory limit
minecraft_memory: "2384M"
# Container ports
minecraft_ports:
  - "25565:25565"
  # Dynmap
  - "8123:8123"
# Container volumes
minecraft_volumes:
  - "/home/{{ ansible_user }}/minecraft/:/data"
# All container environment variables can be found at: https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties
minecraft_options:
  # DO NOT modify these variables
  EULA: "TRUE"
  TYPE: PAPER
  # Modify the below variables
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/jvm-options/#memory-limit
  MEMORY: ""
  JVM_XX_OPTS: "-XX:MaxRAMPercentage=75"
  # https://docker-minecraft-server.readthedocs.io/en/latest/versions/java/
  VERSION: "1.20.1"
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties
  MOTD: A Minecraft Server created using Ansible
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties/#difficulty
  DIFFICULTY: hard
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties/#opadministrator-players
  OPS: ""
  ENABLE_RCON: "true"
  # Best to provide in quotes in case of any special characters
  RCON_PASSWORD: ""
  MAX_PLAYERS: "20"
  ALLOW_NETHER: "true"
  ANNOUNCE_PLAYER_ACHIEVEMENTS: "true"
  GENERATE_STRUCTURES: "true"
  SNOOPER_ENABLED: "false"
  SPAWN_ANIMALS: "true"
  SPAWN_MONSTERS: "true"
  SPAWN_NPCS: "true"
  SPAWN_PROTECTION: "0"
  MODE: survival
  PVP: "true"
  SERVER_NAME: Minecraft Server

# Whether to enable backups for the paper minecraft server
minecraft_backup: true
# Backup container image tag
minecraft_backup_image_tag: latest
# All container environment variables can be found at: https://github.com/itzg/docker-mc-backup#common-variables
minecraft_backup_options:
  # DO NOT modify this variable
  RCON_HOST: minecraft
  # Modify the below variables
  # Backup once a day
  BACKUP_INTERVAL: 24h
  INITIAL_DELAY: 30s
  BACKUP_METHOD: restic
  RESTIC_REPOSITORY: b2:dabminecraft
  # Password used to encrypt backups
  RESTIC_PASSWORD: ""
  # Backblaze B2 S3 credentials
  B2_ACCOUNT_ID: ""
  B2_ACCOUNT_KEY: ""
  # Same as minecraft_options.RCON_PASSWORD
  RCON_PASSWORD: ""
  PRE_BACKUP_SCRIPT: |
    echo "Starting world backup"
    curl -X POST -H "Content-Type: application/json" -d '{"content": "Starting world backup ⏳"}' "{{ discord_webhook }}"
  POST_BACKUP_SCRIPT: |
    echo "Finished world backup"
    curl -X POST -H "Content-Type: application/json" -d '{"content": "World backup complete ✅"}' "{{ discord_webhook }}"
