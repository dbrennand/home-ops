---
# vars file for minecraft-playbook.yml - server_type modded
# Container image tag
minecraft_image_tag: latest
# https://docs.ansible.com/ansible/latest/collections/community/docker/docker_container_module.html#parameter-memory
# Container memory limit
minecraft_memory: "13G"
# Container ports
minecraft_ports:
  - "25565:25565"
# Container volumes
minecraft_volumes:
  - "/home/{{ ansible_user }}/minecraft/:/data"
  - "/home/{{ ansible_user }}/modpacks/:/modpacks"
# All container environment variables can be found at: https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties
minecraft_options:
  # DO NOT modify these variables
  EULA: "TRUE"
  TYPE: CURSEFORGE
  # Modify the below variables
  VERSION: "1.20.1"
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/jvm-options/#memory-limit
  MEMORY: ""
  JVM_XX_OPTS: "-XX:MaxRAMPercentage=75"
  CF_SERVER_MOD: /modpacks/Server-Files-0.2.41.zip
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties
  MOTD: A Modded Minecraft Server created using Ansible
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties/#difficulty
  DIFFICULTY: hard
  # https://docker-minecraft-server.readthedocs.io/en/latest/configuration/server-properties/#opadministrator-players
  OPS: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    31363538373161313132616662303961336161336535333339346365633037323432666661396633
    3635656261323835636635633039316135346137343636310a323662396436623961646231666439
    30336165353931623936666438393636636161323366353934356331303931613730356666643632
    6335336236646464330a646237303663666665373334663466333639303863313563363236393165
    3666
  ENABLE_RCON: "true"
  # Best to provide in quotes in case of any special characters
  RCON_PASSWORD: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    66333830623265313533656135383562623932653164636163613263303838353631316164313433
    3133383136646662376339363562613537616534313366370a626436643538363937623130653362
    31646263666338356362333035623331376165373464333462616264623865633536366337663934
    3334393036616430360a623262666139643630653239346430356264623531336561623431663366
    32633330643135626435356464353566306230646236316137643761356231316531
  SNOOPER_ENABLED: "false"
  SPAWN_PROTECTION: "0"
  SERVER_NAME: Modded Minecraft Server

discord_webhook: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  33616234653035653337353135356261396530633232336365343165636263376636626331653463
  3366323063323132313062353438633139666161346133360a303533653161376435653965363734
  37393266623665326361353138623034353734646636323936373462393962386338633738366633
  6265663361316135650a306662393638393136333634323033393565343531386130633537376564
  37383330383831636663313134316435626165636534346137303738326161616432636632346430
  63333033613732316666383339653432386261393235633034633631613961663265336566353532
  63353832616164373432333135326435643335353534656437393330383862323966373931303634
  62343636393235373265356635306466663834616138616363326239613338613439323732653031
  66623930613938343534666538643530396230643735653235363430376536643338646334343862
  6265353438353437353766313839643733336338373036396633

minecraft_backup: true
minecraft_backup_image_tag: latest
# All container environment variables can be found at: https://github.com/itzg/docker-mc-backup#common-variables
minecraft_backup_options:
  # DO NOT modify this variable
  RCON_HOST: minecraft
  # Modify the below variables
  # Backup once a day
  BACKUP_INTERVAL: 24h
  INITIAL_DELAY: 30s
  BACKUP_METHOD: restic
  RESTIC_REPOSITORY: b2:dabminecraftmodded
  # Password used to encrypt backups
  RESTIC_PASSWORD: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    35336232643530383738303436306631616266633631336566616431313333643138633431613962
    6161643838623963303663333430393136366363366566640a653439373133616435303662373930
    38353434386339346562303233326438386533623835373833626164326661343136376662613064
    3263633366323333320a613434343831383561653765376561393137336566343135346334643561
    33636434303835623665393731653462343335636265653537636435303464303032
  # Backblaze B2 S3 credentials
  B2_ACCOUNT_ID: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    31323632373438353536633238653863313964383535333935663361663465303435333033653964
    3365306265393563336330663063323434313737323966370a326464633762303133363936366433
    65363834363464383361316562653630633931383162613931616535303032346466646137613233
    3231653933326261350a346638663466376439306230643261343735396531613438666136646536
    61626363313638336566353438343562343536303562383263343866323331343538
  B2_ACCOUNT_KEY: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    34323430313765656564303135303137313230386232393738656434373065666330393565323134
    6161326465373064383630353035356538383664346633320a626263653662666631656437356433
    63666538313265636337383733356264663438306535343765663737316431396366613966356231
    6533666165646231620a366365333965666535623836356539613866373032376330373139306236
    30336430383765323837383631626566656466376236633334303866323030636464
  # Same as minecraft_options.RCON_PASSWORD
  RCON_PASSWORD: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    66333830623265313533656135383562623932653164636163613263303838353631316164313433
    3133383136646662376339363562613537616534313366370a626436643538363937623130653362
    31646263666338356362333035623331376165373464333462616264623865633536366337663934
    3334393036616430360a623262666139643630653239346430356264623531336561623431663366
    32633330643135626435356464353566306230646236316137643761356231316531
  PRE_BACKUP_SCRIPT: |
    echo "Starting world backup for modded minecraft"
    curl -X POST -H "Content-Type: application/json" -d '{"content": "Starting world backup for modded minecraft ⏳"}' "{{ discord_webhook }}"
  POST_BACKUP_SCRIPT: |
    echo "Finished world backup for modded minecraft"
    curl -X POST -H "Content-Type: application/json" -d '{"content": "World backup complete for modded minecraft ✅"}' "{{ discord_webhook }}"
