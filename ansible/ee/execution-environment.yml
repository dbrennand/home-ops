---
version: 3
images:
  base_image:
    name: ghcr.io/almalinux/10-kitten-minimal:10-kitten-20250204
dependencies:
  ansible_core:
    package_pip: ansible-core==2.18.3
  ansible_runner:
    package_pip: ansible-runner==2.4.1
  python: requirements.txt
  galaxy: requirements.yml
additional_build_steps:
  prepend_base:
    - RUN rpm --import https://downloads.1password.com/linux/keys/1password.asc
    - RUN echo -e "[1password]\nname=1Password Stable Channel\nbaseurl=https://downloads.1password.com/linux/rpm/stable/\$basearch\nenabled=1\ngpgcheck=1\ngpgkey=\"https://downloads.1password.com/linux/keys/1password.asc\"" > /etc/yum.repos.d/1password.repo # noqa yaml[line-length]
    - RUN microdnf install -y python3 python3-pip openssh-clients git jq 1password-cli
options:
  package_manager_path: /usr/bin/microdnf
